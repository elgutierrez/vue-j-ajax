/*!
    Title: vue-j-ajax
    URL: https://github.com/lilpug/vue-j-ajax
    Version: 1.5.0
    Author: David Whitehead
    Copyright (c) David Whitehead
    Copyright license: MIT
    Description: vue-j-ajax is a simple vuejs plugin which wraps jQuery AJAX calls up and sends any data in the form data format.	         
    Requires: jQuery 2.2+
*/
var VueJAjax={install:function(e,t){e.prototype.$ObjectNullToUndefined=function(e){var t={};return $.each(e,function(e,a){null===a?t[e]=void 0:"object"==typeof a&(!(a instanceof File)&&!(a instanceof FileList)&&!(a instanceof Array))?t[e]=this.$ObjectNullToUndefined(a):t[e]=a}.bind(this)),t},e.prototype.$ConvertObjectToFormData=function(e,t,a){var t=t||new FormData;return $.each(e,function(e,l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l)null!=a&&void 0!=a&&(e=a+"["+e+"]"),t.append(e,l);else if("object"!=typeof l||l instanceof File||l instanceof FileList||l instanceof Array)null!=a&&void 0!=a&&(e=a+"["+e+"]"),$.each(l,function(a,l){t.append(e,l)});else{var n=e;null!=a&&void 0!=a&&(n=a+"["+e+"]"),this.$ConvertObjectToFormData(l,t,n)}}.bind(this)),t},e.mixin({data:function(){return{fileUploadProgress:{totalSize:null,currentUploadSize:null,percentage:null,roundedPercentage:null}}},methods:{VueJAjaxClearProgressData:function(){this.fileUploadProgress.totalSize=null,this.fileUploadProgress.currentUploadSize=null,this.fileUploadProgress.percentage=null,this.fileUploadProgress.roundedPercentage=null},VueJAjax:function(e){defaultOptions={parameters:null,method:null,url:null,dataReturnType:null,doneCallBack:null,failCallBack:null,timeout:864e5};var t=null;return(e=$.extend(defaultOptions,e)).parameters&&(t=this.$ObjectNullToUndefined(e.parameters),t=this.$ConvertObjectToFormData(t)),$.ajax({type:e.method,url:e.url,timeout:e.timeout,contentType:!1,processData:!1,dataType:e.dataReturnType,data:t}).fail(function(t){e.failCallBack&&e.failCallBack(t)}).done(function(t){e.doneCallBack&&e.doneCallBack(t)})},VueJAjaxFileUpload:function(e){defaultOptions={parameters:null,method:null,url:null,dataReturnType:null,doneCallBack:null,failCallBack:null,calculateProgress:!0,autoClearProgress:!1,timeout:864e5};var t=null;(e=$.extend(defaultOptions,e)).parameters&&(t=this.$ObjectNullToUndefined(e.parameters),t=this.$ConvertObjectToFormData(t));var a=null;return e.calculateProgress&&(a=function(e){function t(e){if(0===e)return"0 Byte";var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,a)).toFixed(2)+" "+t[a]}if(e.lengthComputable){var a=e.total,l=e.loaded;this.fileUploadProgress.totalSize=t(a),this.fileUploadProgress.currentUploadSize=t(l);var n=100*l/a;n>=100?(this.fileUploadProgress.percentage="100%",this.fileUploadProgress.roundedPercentage="100%"):(this.fileUploadProgress.percentage=n+"%",this.fileUploadProgress.roundedPercentage=Math.round(n)+"%")}}.bind(this)),$.ajax({type:e.method,url:e.url,timeout:e.timeout,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&e.calculateProgress&&t.upload.addEventListener("progress",function(e){a(e)},!1),t},contentType:!1,processData:!1,dataType:e.dataReturnType,data:t}).fail(function(t){e.calculateProgress&&e.autoClearProgress&&this.VueClearProgressData(),e.failCallBack&&e.failCallBack(t)}.bind(this)).done(function(t){e.calculateProgress&&e.autoClearProgress&&this.VueClearProgressData(),e.doneCallBack&&e.doneCallBack(t)}.bind(this))}}})}};